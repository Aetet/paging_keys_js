<!DOCTYPE html>
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/prototype/1.6.1/prototype.js" type="text/javascript"></script>
  <script src="../../javascripts/prototype/paging_keys.js" type="text/javascript"></script>
  
  <script src="assets/unittest.js" type="text/javascript"></script>
  <link rel="stylesheet" href="assets/unittest.css" type="text/css" />
</head>
<body>

<div id="content">

  <div id="header">
    <h1>Unit Test: prototype/paging_keys.js</h1>
  </div>

  <!-- Log output (one per Runner, via {testLog: "testlog"} option)-->
  <div id="testlog"></div>
  
  <h1>Test Elements for paging</h1>
  <!-- Put or load sample/test html here (load via sampleLoad(file) in setup() methods) -->
  <div class="hentry">                                                                                                                
    <h2>
      <a href="http://localhost:3000/blogs/1/2009/1/6/quia-rerum-aut-aut-sit-voluptates" class="entry-title" id="post-592" rel="bookmark">Quia rerum aut aut sit voluptates</a>
    </h2>
  </div>

  <div class="hentry">                                                                                                                
    <h2>
      <a href="http://localhost:3000/blogs/1/2008/12/28/velit-ut-eaque-ducimus-aut-et-aut-quis-autem-quisquam" class="entry-title" id="post-152" rel="bookmark">Velit ut eaque ducimus aut et aut quis autem quisquam</a>
    </h2>
  </div>

  <div class="hentry">                                                                                                                
    <h2>
      <a href="http://localhost:3000/blogs/1/2008/12/26/dolorem-voluptates-sit-id-dolores-vel" class="entry-title" id="post-849" rel="bookmark">Dolorem voluptates sit id dolores vel</a>
    </h2>
  </div>

  <div class="hentry">                                                                                                                
    <h2>
      <a href="http://localhost:3000/blogs/1/2008/12/20/molestiae-corporis-earum-enim-sapiente-temporibus-culpa-et-in" class="entry-title" id="post-288" rel="bookmark">Molestiae corporis earum enim sapiente temporibus culpa et in</a>
    </h2>
  </div>

  <div class="hentry">                                                                                                                
    <h2>
      <a href="http://localhost:3000/blogs/1/2008/12/13/et-vero-qui-cupiditate-fuga-asperiores-est" class="entry-title" id="post-794" rel="bookmark">Et vero qui cupiditate fuga asperiores est</a>
    </h2>  
  </div>
  
  <p><div class="pagination"><a href="" class="disabled prev_page">&laquo; Previous</a> <span class="current">1</span> <a href="/blogs/1/posts/page/2" rel="next">2</a> <a href="/blogs/1/posts/page/3">3</a> <a href="/blogs/1/posts/page/2" class="next_page" rel="next">Next &raquo;</a></div></p>
    
  <div id="paging-nav">
    <a onclick="pagingKeys.moveToItem(1); return false;" href="javascript:void(0);">next (j)</a> |
    <a onclick="pagingKeys.moveToItem(-1); return false;" href="javascript:void(0);">prev (k)</a> |
    <a onclick="pagingKeys.movePage(1); return false;" href="javascript:void(0);">page next (h)</a> |
    <a onclick="pagingKeys.movePage(-1); return false;" href="javascript:void(0);">page prev (l)</a> 
  </div>
    
</div>

<script type="text/javascript">
// <![CDATA[                   
        
  // helper methods for tests go here
  

  new Test.Unit.Runner({
    
    setup: function() {
      
    },
    
    teardown: function() {
      
    },  
    
    test_item_map_built: function() {
       with (this) {      
          assertEqual(pagingKeys.item_map.length, 7);    
          assertEqual(pagingKeys.item_map[0].id, 'prev')
          assertEqual(pagingKeys.item_map[1].id, 'post-592')
          assertEqual(pagingKeys.item_map[2].id, 'post-152')
          assertEqual(pagingKeys.item_map[3].id, 'post-849')
          assertEqual(pagingKeys.item_map[4].id, 'post-288')
          assertEqual(pagingKeys.item_map[5].id, 'post-794')
          assertEqual(pagingKeys.item_map[6].id, 'next')    
          
          assertEqual((pagingKeys.item_map[1].y > 0), true)
          assertEqual((pagingKeys.item_map[2].y > 0), true)
          assertEqual((pagingKeys.item_map[3].y > 0), true)
          assertEqual((pagingKeys.item_map[4].y > 0), true)
          assertEqual((pagingKeys.item_map[5].y > 0), true)
        }
    }, 
    
    test_current_item : function() {
      // should be first item
      with (this) {  
       assertEqual(pagingKeys.currentItem(), pagingKeys.item_map[0]);
      };
    },
    
    test_pagination_elements_exist : function() {
      with (this) {    
        assertEqual(($$('.next_page')[0].href.length > 0), true);
        assertEqual(($$('.prev_page')[0].href.length > 0), true);
        assertEqual($$('.hentry h2 a.entry-title').length, 5);    
      }
    }
      
  }, {testLog: "testlog"}); 
// ]]>
</script>
</body>
</html>